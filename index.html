<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>cattac的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="cattac的博客">
<meta property="og:url" content="https://guge2.github.io/index.html">
<meta property="og:site_name" content="cattac的博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="cattac">
<meta property="article:tag" content="书籍, 算法, Python, C++">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="cattac的博客" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">cattac的博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">记录写读书笔记与技术</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS 订阅"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="搜索"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://guge2.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-python项目工程化" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/12/07/python%E9%A1%B9%E7%9B%AE%E5%B7%A5%E7%A8%8B%E5%8C%96/" class="article-date">
  <time class="dt-published" datetime="2024-12-07T04:19:01.000Z" itemprop="datePublished">2024-12-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/12/07/python%E9%A1%B9%E7%9B%AE%E5%B7%A5%E7%A8%8B%E5%8C%96/">Python 项目工程化开发</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="规划一个使用-pip-requirements-txt-的-Python-项目工程化开发流程："><a href="#规划一个使用-pip-requirements-txt-的-Python-项目工程化开发流程：" class="headerlink" title="规划一个使用 pip + requirements.txt 的 Python 项目工程化开发流程："></a>规划一个使用 pip + requirements.txt 的 Python 项目工程化开发流程：</h3><h4 id="1-首先，创建项目的标准目录结构："><a href="#1-首先，创建项目的标准目录结构：" class="headerlink" title="1. 首先，创建项目的标准目录结构："></a>1. 首先，创建项目的标准目录结构：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Copymy_project/</span><br><span class="line">├── src/                    # 源代码目录</span><br><span class="line">│   └── my_project/        # 主要代码包</span><br><span class="line">│       ├── __init__.py</span><br><span class="line">│       ├── core/          # 核心功能模块</span><br><span class="line">│       ├── utils/         # 工具函数</span><br><span class="line">│       └── config.py      # 配置文件</span><br><span class="line">├── tests/                 # 测试目录</span><br><span class="line">│   ├── __init__.py</span><br><span class="line">│   └── test_*.py         # 测试文件</span><br><span class="line">├── docs/                  # 文档目录</span><br><span class="line">├── requirements.txt       # 生产环境依赖</span><br><span class="line">├── requirements-dev.txt   # 开发环境依赖</span><br><span class="line">├── setup.py              # 安装配置文件</span><br><span class="line">└── README.md             # 项目说明文档</span><br></pre></td></tr></table></figure>

<h4 id="2-设置虚拟环境（强烈推荐）："><a href="#2-设置虚拟环境（强烈推荐）：" class="headerlink" title="2. 设置虚拟环境（强烈推荐）："></a>2. 设置虚拟环境（强烈推荐）：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建虚拟环境</span></span><br><span class="line">python -m venv venv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 激活虚拟环境</span></span><br><span class="line"><span class="comment"># Windows:</span></span><br><span class="line">venv\Scripts\activate</span><br><span class="line"><span class="comment"># Linux/Mac:</span></span><br><span class="line"><span class="built_in">source</span> venv/bin/activate</span><br></pre></td></tr></table></figure>

<h4 id="3-管理依赖："><a href="#3-管理依赖：" class="headerlink" title="3. 管理依赖："></a>3. 管理依赖：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装生产依赖</span></span><br><span class="line">pip install package_name</span><br><span class="line"><span class="comment"># 记录依赖到 requirements.txt</span></span><br><span class="line">pip freeze &gt; requirements.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装开发依赖（测试、代码检查等）</span></span><br><span class="line">pip install pytest pylint black</span><br><span class="line"><span class="comment"># 记录开发依赖</span></span><br><span class="line">pip freeze &gt; requirements-dev.txt</span><br></pre></td></tr></table></figure>

<h4 id="4-在-setup-py-中配置项目信息："><a href="#4-在-setup-py-中配置项目信息：" class="headerlink" title="4. 在 setup.py 中配置项目信息："></a>4. 在 setup.py 中配置项目信息：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> setuptools <span class="keyword">import</span> setup, find_packages</span><br><span class="line"></span><br><span class="line">setup(</span><br><span class="line">    name=<span class="string">&quot;my_project&quot;</span>,</span><br><span class="line">    version=<span class="string">&quot;0.1.0&quot;</span>,</span><br><span class="line">    packages=find_packages(where=<span class="string">&quot;src&quot;</span>),</span><br><span class="line">    package_dir=&#123;<span class="string">&quot;&quot;</span>: <span class="string">&quot;src&quot;</span>&#125;,</span><br><span class="line">    install_requires=[</span><br><span class="line">        <span class="comment"># 从 requirements.txt 读取依赖</span></span><br><span class="line">        line.strip()</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> <span class="built_in">open</span>(<span class="string">&quot;requirements.txt&quot;</span>)</span><br><span class="line">    ],</span><br><span class="line">    python_requires=<span class="string">&quot;&gt;=3.7&quot;</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h4 id="5-设置开发工具："><a href="#5-设置开发工具：" class="headerlink" title="5. 设置开发工具："></a>5. 设置开发工具：</h4><p>配置 <code>.gitignore</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">venv/</span><br><span class="line">__pycache__/</span><br><span class="line">*.pyc</span><br><span class="line">.pytest_cache/</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>添加常用开发工具：</li>
</ol>
<ul>
<li>pytest：单元测试</li>
<li>black：代码格式化</li>
<li>pylint：代码质量检查</li>
<li>pre-commit：git 提交前检查</li>
</ul>
<h4 id="6-编写测试用例："><a href="#6-编写测试用例：" class="headerlink" title="6. 编写测试用例："></a>6. 编写测试用例：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tests/test_example.py</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_something</span>():</span><br><span class="line">    <span class="keyword">assert</span> <span class="literal">True</span></span><br></pre></td></tr></table></figure>

<h4 id="7-设置-CI-CD（比如用-GitHub-Actions）："><a href="#7-设置-CI-CD（比如用-GitHub-Actions）：" class="headerlink" title="7. 设置 CI&#x2F;CD（比如用 GitHub Actions）："></a>7. 设置 CI&#x2F;CD（比如用 GitHub Actions）：</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Python</span> <span class="string">CI</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span> [<span class="string">push</span>]</span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">test:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Set</span> <span class="string">up</span> <span class="string">Python</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-python@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">python-version:</span> <span class="string">&#x27;3.x&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">dependencies</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          python -m pip install --upgrade pip</span></span><br><span class="line"><span class="string">          pip install -r requirements.txt</span></span><br><span class="line"><span class="string">          pip install -r requirements-dev.txt</span></span><br><span class="line"><span class="string"></span>      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Run</span> <span class="string">tests</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">pytest</span></span><br></pre></td></tr></table></figure>

<h4 id="8-实用建议："><a href="#8-实用建议：" class="headerlink" title="8. 实用建议："></a>8. 实用建议：</h4><h5 id="使用项目根目录下的-Makefile-简化常用命令："><a href="#使用项目根目录下的-Makefile-简化常用命令：" class="headerlink" title="- 使用项目根目录下的 Makefile 简化常用命令："></a>- 使用项目根目录下的 <code>Makefile</code> 简化常用命令：</h5><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"><span class="keyword">.PHONY</span>: test lint format</span></span><br><span class="line"></span><br><span class="line"><span class="section">test:</span></span><br><span class="line">    pytest</span><br><span class="line"></span><br><span class="line"><span class="section">lint:</span></span><br><span class="line">    pylint src/</span><br><span class="line"></span><br><span class="line"><span class="section">format:</span></span><br><span class="line">    black src/</span><br></pre></td></tr></table></figure>

<h5 id="养成良好的版本控制习惯："><a href="#养成良好的版本控制习惯：" class="headerlink" title="- 养成良好的版本控制习惯："></a>- 养成良好的版本控制习惯：</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;Initial commit&quot;</span></span><br></pre></td></tr></table></figure>

<h5 id="文档维护："><a href="#文档维护：" class="headerlink" title="- 文档维护："></a>- 文档维护：</h5><ul>
<li>在 README.md 中说明项目用途、安装方法和基本用法</li>
<li>在代码中编写详细的文档字符串</li>
<li>可以使用 Sphinx 生成完整的项目文档</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://guge2.github.io/2024/12/07/python%E9%A1%B9%E7%9B%AE%E5%B7%A5%E7%A8%8B%E5%8C%96/" data-id="cm4dlsvkk0003dcjj7ycg6ix0" data-title="Python 项目工程化开发" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-书籍摘抄/书籍摘抄" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/12/07/%E4%B9%A6%E7%B1%8D%E6%91%98%E6%8A%84/%E4%B9%A6%E7%B1%8D%E6%91%98%E6%8A%84/" class="article-date">
  <time class="dt-published" datetime="2024-12-07T04:19:01.000Z" itemprop="datePublished">2024-12-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/12/07/%E4%B9%A6%E7%B1%8D%E6%91%98%E6%8A%84/%E4%B9%A6%E7%B1%8D%E6%91%98%E6%8A%84/">书籍摘抄</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="孽子"><a href="#孽子" class="headerlink" title="孽子"></a>孽子</h1><h5 id="白先勇"><a href="#白先勇" class="headerlink" title="白先勇"></a>白先勇</h5><ol>
<li>“这是我们血里头带来的——就好像这个岛上的台风地震一般，一发不可收拾。傅爷爷，所以我爱哭，我要把血里头的毒哭干净。”</li>
<li>正当我们将傅老爷子的墓封盖起来的一刹那，山径石级上一阵脚步声，突然冒出一个人来。王夔龙及时赶来了，他穿了一身的黑西装，打折黑领带，胸前捧着一大束拳头大一朵的白菊花，总有二十来枝。他大概爬山爬急了，舞姿在重重地喘息一脸发青。他看到石椁里躺着傅老爷子的灵柩，便往前走了几步，弯下身去，将拿书白菊花轻轻地放在墓前，望着石椁里傅老爷子的棺木，静静地凝视了十多分钟。陡然间， 扑通一声，他那高达嶙峋的身躯，竟跪跌在傅老爷子墓前，他全身匍伏，顶额抵地，开始放声恸哭起来，他那高耸的双肩，急剧地抽搐着，一声比一声打，一声比一声凶猛。他的呼号，愈来愈高亢，愈来愈凄厉，简直不像人类发出来的哭声，好似一头受了重创的猛兽，在最深最深的黑夜里跼在幽暗的洞穴口，朝着苍天，发出最后一声穿石裂帛痛不可当的悲啸，随着夕辉的血浪，沸沸滚滚往山脚冲流下去，在那千茔百冢的山谷里，此起彼落地激荡着。于是我们六个人，由师傅领头，在那浴血般的夕阳影里，也一齐白纷纷地跪拜了下去。</li>
</ol>
<h1 id="不能承受的生命之轻"><a href="#不能承受的生命之轻" class="headerlink" title="不能承受的生命之轻"></a>不能承受的生命之轻</h1><h5 id="米兰·昆德拉"><a href="#米兰·昆德拉" class="headerlink" title="米兰·昆德拉"></a>米兰·昆德拉</h5><ol>
<li>最沉重的负担压迫着我们，让我们屈服于它，把我们压倒到地上。但在历代的爱情诗中，女人总渴望承受一个男性身体的重量。<u>于是，最沉重的负担同时也成了最强盛的生命力的影响，负担越重，我们的生命越贴近大地，他就越真切实在。</u></li>
<li>相反，当负担完全缺失，人就会变得比空气还轻，就会飘起来，就会远离大地和地上的生命，人也就只是一个半真的存在，其运动也会变得自由而没有意义。</li>
<li>这种对称的结局，同样的情节出现在开头和结尾，看来或许极具“小说味”。是的，我承认，但惟一的条件，就是<u>这种小说味对你来说并不意味着“虚构”、“杜撰”，或者“与生活一点都不像”。因为人生就是这样组成的。</u></li>
<li><em><strong>复生</strong></em>   <u> 不，这绝不是迷信，这是把她一下子从惶惶不安中解放出来的一种美感，让她全身心都充满了一种对生活崭新的渴望。</u> 偶然的幸运之鸟再一次飞落在她的肩头。她含着眼泪，无限幸福地听着他在身边呼吸。</li>
<li>他已经很清楚人们的心理，他们从别人的精神耻辱中得到无比的快乐，根本不愿意有什么解释来糟蹋这份快乐。</li>
<li>他在墓地上发表了关于诗人如何热爱苏联的一番演讲。<u>也许他这样大放厥词是为了唤醒诗人。然而世界是如此丑陋，没有人愿意起死回生。</u></li>
<li>我们全都需要有人注视我们。根据我们生活所追求的不同的目光类型，可以将我们分为四类：<ul>
<li>追求无数不知名的人注视的目光；</li>
<li>需要众多熟悉目光注视；</li>
<li>所爱之人的目光；</li>
<li>幻象之人的目光.</li>
</ul>
</li>
<li><em><strong>弗兰兹之死</strong></em> ： 对妻子而言，丈夫的下葬，终于成为了她真正的婚礼；这是她生命中的皇冠；是对她所有痛苦的补偿。</li>
<li><em><strong>托马斯：</strong></em> 我没有使命，任何人都没有使命。当你发现自己是自由的，没有任何使命时，便是一种极大的解脱。</li>
</ol>
<h1 id="挪威的森林"><a href="#挪威的森林" class="headerlink" title="挪威的森林"></a>挪威的森林</h1><h5 id="村上春树"><a href="#村上春树" class="headerlink" title="村上春树"></a>村上春树</h5><ol>
<li>想到这里，我悲哀得难以自禁。因为，直子连爱都没有爱过我。</li>
<li><strong>木月：</strong> 他有那么一种能力，可以准确无误地捕捉气氛的变化，从而挥洒自如地因势利导。另外他还有一种颇为可贵的才能，可以从对方不甚有趣的谈话中抓出有趣的部分来。因此，每次与他交谈，我都觉得自己俨然是个妙趣横生的人，在欢度妙趣横生的人生。</li>
<li><strong>死并非生的对立面，而作为生的一部分永存。</strong></li>
<li>哪里会有人喜欢孤独，不过是不喜欢失望。</li>
<li>不过，让直子的面影在我脑海中如此浮现出来，总是需要一点时间的。而且，随着岁月的流逝，所需的时间越来越长。这固然令人悲伤，但事实如此。期初五秒即可响起，渐次变成十秒，三十秒，一分钟。它延长得那样迅速，竟同夕阳下的阴影一般，并将很快消融在冥冥夜色中。哦，原来我的记忆的确正在步步远离直子站立的位置，正如我逐渐远离自己一度站过的位置一样。</li>
</ol>
<h1 id="瓦尔登湖"><a href="#瓦尔登湖" class="headerlink" title="瓦尔登湖"></a>瓦尔登湖</h1><h5 id="梭罗"><a href="#梭罗" class="headerlink" title="梭罗"></a>梭罗</h5><ol>
<li>I went to the woods because I wished to live deliberately, to front only the essential facts of life, and see if I could learned what it had to teach, and not, when I came to die, to discover that I had not lived.</li>
<li>Let us spend one day se deliberately as nature and not be thrown off the track by every nutshell and mosquitos wing that falls on the rails; let us rise early and fast gently and without perturbation, <u> like company come and like compony go; let the bells ring and let the children cry, determined to make a day of it.</u></li>
<li>我到森林里生活，是因为<u>我想要清醒地生活</u> ，抛开各种细枝末节的事情，看看我是否能够少走点弯路，以免等到临死才发现自己虚度了一生。我并不希望过着不能称之为生活的日子，因为或者是如此的美好；我也不愿退隐林泉，除非实在迫不得已。我想要深入地体验生活，吸取生活全部的精髓；我想要坚定地像斯巴达人那样去生活，把各种和生活无关的东西统统击溃；<u>我要划出宽广的战场，仔细消灭所有的浮华和琐碎，将生活逼到某个角落，剥掉它全部的伪饰，如果它的真面目是低贱的，那么 我就彻底地认清它的低贱，并将其公诸世人；如果它的本质是高尚的，那么我就切实地去认识它的高尚，并将其如实地记录在我的下一篇游记里。</u></li>
</ol>
<h1 id="毛姆传"><a href="#毛姆传" class="headerlink" title="毛姆传"></a>毛姆传</h1><ol>
<li><p><strong>《人性的枷锁》：</strong>“他真诚地错把自己的肉欲当做浪漫的恋情，错把自己的优柔寡断视为艺术家的气质，还错把自己的无所事事看成哲人的超然物外。他心智平庸，却孜孜追求高尚娴雅，因而从他眼睛里望出去，所有的事情都蒙上了一层感伤的金色雾纱，轮廓模糊不清，结果就显得比实际形象大些。<strong>他在撒谎，却从不知道自己在撒谎</strong>；当别人点破他时，他却说谎言是美的。”</p>
</li>
<li><p><em>医生老师：</em>“在解剖学上，不普通的现象也是正常的。”</p>
</li>
<li><p>“如动物般互相吸引的友谊……是那么不理性，不切实际；讽刺的是，你很有可能对一个不值得的人产生感觉。这种友谊，虽然性并没有积极参与其中，但真的跟爱很类似：它以同样的方式高涨，又以同样的方式消减，这也并非不可能。我不记得是谁引起了这些令人困惑的思考，但是……我想我被某个人吸引过，有过得不到回应的感觉。”</p>
</li>
<li><p><em>毛姆与哈利</em>     “这两人看戏，读小说的时候很容易落泪……但生活中遇到悲惨的事却从来不哭。也许<strong>他们尽量让自己与令人无法忍受的悲伤隔绝开来</strong>，有时候显得特别冰冷，因此冷却毁掉了人际关系。”</p>
</li>
<li><p><em>《一个体面的男人》</em>    “一个人只有非常坚强，非常自信，才能违背通常的观点，如果你不具备这些特点，还是不要冒这个险了，就像凡夫俗子那样随大流吧，<u><strong>走老路至少是安全的，不刺激，不勇敢，相当无聊，但安全极了</strong>。</u></p>
</li>
<li><p>“<strong>我知道心中这本小说篇幅很长</strong>。为了不被打扰，我谢绝出版界经理们纷至沓来的约函稿，并暂时退出了戏剧圈。这时，<strong>我已经37岁了</strong>。”</p>
</li>
<li><p>杰拉德·费德里克·哈克斯顿，1892.10.06，接下来的三十年里，他成了毛姆生活的中心。</p>
</li>
<li><p>南太平洋   《雨》  卡普里岛</p>
</li>
<li><p>《雨》一次次再版，为毛姆赚了一百多万美元版税。</p>
</li>
<li><p><strong>极度自律</strong>：</p>
<ol>
<li>按时睡，客人泳池边虚度</li>
<li>早起，阅读一小时</li>
<li>8:30 洗漱</li>
<li>9:00-12:30 书房工作</li>
<li>与客人喝一杯；午觉；读书</li>
<li>16:00 娱乐活动</li>
</ol>
</li>
</ol>
<h5 id="关于《人性的枷锁》：1911年写"><a href="#关于《人性的枷锁》：1911年写" class="headerlink" title="关于《人性的枷锁》：1911年写"></a>关于《人性的枷锁》：1911年写</h5><p>​    毛姆从他的个人经历中选取了大量素材，很多地点，情景和次要人物都可以从生活中辨认出来。</p>
<p>杰拉德·凯利：巴黎学艺术的劳森&#x2F;背叛菲利普与米尔德里德私奔的朋友；</p>
<p>苏·琼斯：莎莉·阿特尔聂；</p>
<p>导师温特沃斯·胡舍：莎莉之父</p>
<p>他知道《人生的枷锁》和他从前的任何作品都不在一个水准上，他还知道他这么做是为了取悦自己，获得全部的书写自由。</p>
<p>故事的核心主题，也就是菲利普的“枷锁”，是对他可怕的米尔德里德受虐性的迷恋。这个奇怪的雌雄同体的人物原型仍是个谜。</p>
<p>尽管有瑕疵，《人性的枷锁》依然是毛姆的主要成就。毛姆向来树立一种难以取悦的疏离形象，而在这部作品中，他一反常态地投入，用热烈的激情席卷了读者。</p>
<p><strong>1915.08.02于美国出版</strong></p>
<h1 id="童年·在人间·我的大学"><a href="#童年·在人间·我的大学" class="headerlink" title="童年·在人间·我的大学"></a>童年·在人间·我的大学</h1><h5 id="高尔基"><a href="#高尔基" class="headerlink" title="高尔基"></a>高尔基</h5><ol>
<li><p><em>第一次船上水手揍贼</em>     再说，他们又为什么如此热衷于极为残忍的凶狠，又为什么能够乖巧得不顾廉耻？</p>
</li>
<li><p><em>和母亲，继父同住</em>    敞开的大门就像一个老叫花子张着没牙的黑洞洞的嘴巴，密密麻麻的小人儿成群结队地向里面爬。中午时分，又是一阵汽笛声，工厂敞开乌黑的嘴唇，张开了黑魆魆的深洞，令人作呕地吐出了反复咀嚼过的工人，他们像一股污浊的黑流淌到街上。</p>
</li>
<li><p><em>刀捅继父</em>     在回忆野蛮的俄罗斯生活中的这些像铅般沉重的令人厌恶的丑事时，我时刻反问自己：<u>“值不值得提起这些卑鄙龌龊的事情呢？”</u> 每一次我都怀着重新恢复起来的信心回答自己：“值得”。因为这是长久存在的丑恶的真实。这种丑恶至今尚未死亡。这是一定要从根本上认识的真实，只有这样才能从记忆中，从人的心灵中，从我们沉重的，可耻的生活中，把它从根上彻底铲除。</p>
</li>
<li><p><em>老板家初次听到音乐</em>     这种小提琴具有神奇的力量，又让人难以忍受，因为听着它的声响几乎让人感到痛苦。有时，乐曲的声音如此壮烈，仿佛那幢房子都在颤抖，窗上的玻璃也在吱轧作响。房檐上滴着水珠，我的眼中也留下了泪水。</p>
</li>
<li><p>我知道，即便走进了这个家庭的人是一位圣者，我的老板一家人也会教训他，按照自己的模式来改造他，<u>他们之所以要这么做，完全是因为他们空虚无聊。如果他们不挑人加的毛病，对别人大声训骂，讥讽嘲弄，他们就不会说话了，就会变成哑巴，就会感觉不到自身的存在。人为了感觉到自身的存在，必定要用某种方式来对待别人</u>。。。。。。即便人家开始按照他们的生活方式，按他们的逻辑思维，按他们的感情体会，他们也依然会为此而对他加以谴责。</p>
</li>
<li><p>我既不喝伏特加酒，也不和姑娘们鬼混，书本替代了这两种形式，使我的灵魂陶醉，然而，书读得越多，我越不能忍受这种空虚的、毫无必要的生活，虽然我也感觉到，别人的生活也是如此。</p>
</li>
<li><p><u>我刚刚十五岁，但是有的时候我感到自己已经上了年纪。我的经历，我读过的书籍以及我忐忑不安考虑的各种问题一起积压在心头，因此，我的内心仿佛膨胀起来，变得十分沉重。探查一下，我发现我的内心世界犹如一个非常拥挤地堆满了各种物件的储藏室，挤满了各种观感印象，而要想把这些东西理出一个头绪，我既没有力量，也不具备能力。</u></p>
</li>
</ol>
<h1 id="围城"><a href="#围城" class="headerlink" title="围城"></a>围城</h1><h5 id="钱钟书"><a href="#钱钟书" class="headerlink" title="钱钟书"></a>钱钟书</h5><ol>
<li><p>觉得他爱国而国不爱他，大有青年守节的孀妇不见宠与翁姑的怨抑。</p>
</li>
<li><p>所以他说话里嵌的英文字，还比不得嘴里嵌的金牙，因为金牙不仅妆点，尚可使用，只好比牙缝里的肉屑，表示饭菜吃得好，此外全无用处。</p>
</li>
<li><p>可是这喜欢是空的，像小孩子放的气球，上去不到几尺，便爆裂归于乌有，只剩下忽忽若失的无名怅惘。</p>
</li>
<li><p>昨天囫囵吞地忍受的整块痛苦，当时没工夫辨别滋味，现在，牛反刍似的，零星断续，细嚼出没底的回味。</p>
</li>
<li><p>大学鄙视链：理科生–文科生；<br>外国语文系–中国文学系–哲学系–社会学系–教育系–先生</p>
</li>
<li><p><u>从前愚民政策是不许人民受教育，现代愚民政策是只需人民受一种教育，不受教育的人，因为不识字，上人的当；受教育的人，因为识字，上了印刷品的当。</u></p>
</li>
<li><p>渐鸿这时候，心像和心里的痛在赛跑，要跑得快，不让这痛赶上，胡扯些不相干的话，仿佛抛掷写障碍物，能暂时拦阻这痛的追赶。</p>
</li>
<li><p>天生人是教他们孤独的，一个个改各归各，老死不相往来。身体里容不下的东西，或消化，或排泄，是个人的事；为什么心里容不下的情感，要找同伴来分摊？聚在一起，动不动自己冒犯人，或者人开罪自己，好像一只只刺猬，只好保持着彼此间的距离，要亲密团结，不是你刺痛我的肉，就是我擦破你的皮。</p>
</li>
<li><p>一切会议上对于提案的赞成和反对极少有就事论事的。有人反对这提议是跟提议的人闹意见。有人赞成这提议是跟反对这提议的人过不去。有人因为反对或赞成的人和自己有交情，所以应声附和。</p>
</li>
<li><p>那时候我。。。。，现在我知道。。。。是怎么一回事，我学了乖，当然见风使舵，<u>这是我的进步。话是空的，人是活的；不是人照着话做，是话跟着人变。</u></p>
</li>
<li><p>他的官还可以做下去——不，做上去；</p>
</li>
<li><p>在小乡镇时，他怕人家倾轧，到了大都市，他又恨人家冷淡，倒觉得倾轧还是瞧得起自己的表示。就是条微生虫，也沾沾自喜，希望有人搁它在显微镜下放大了看的。拥挤里的孤寂，热闹里的凄凉，使他像许多住在这孤岛上的人，心灵也仿佛一个无凑畔的孤岛。</p>
</li>
<li><p>物价像断了线的风筝，又像得道成仙，平地飞升。</p>
</li>
<li><p>【柔嘉】<u>这一阵泪不像只是眼里流的，宛如心里，整个身体里都挤出了热泪合在一起宣泄。</u></p>
</li>
<li><p>【方渐鸿】他信脚走着，彻夜不睡的路灯把他的影子一盏盏彼此递交。</p>
</li>
</ol>
<h1 id="百年孤独"><a href="#百年孤独" class="headerlink" title="百年孤独"></a>百年孤独</h1><h5 id="马尔克斯"><a href="#马尔克斯" class="headerlink" title="马尔克斯"></a>马尔克斯</h5><ol>
<li>他归来后没几个月，便经历了一个极剧衰老的过程，很快就被归为那类无用的老翁，他们像幽灵般在卧室间步履蹒跚地游荡，高声追怀美好岁月却无人理睬，知道某天清晨死在床上才被人响起。<u>[梅尔吉亚德斯]</u></li>
<li>“你看看家里都空了，孩子们四散在外，又只剩下咱们两个，跟当初一个样。”</li>
<li>整艘船仿佛占据着一个独特的空间，属于孤独和遗忘的空间，远离时光的侵蚀，避开飞鸟的侵扰。</li>
<li>大人小孩都津津有味地吮咂着可口的绿色失眠小公鸡，美味的粉红失眠小鱼和柔软的黄色失眠小马，于是到了星期一凌晨，整个镇子都醒着。</li>
<li>他被迫发动了32场战争，打破与死亡之间的所有协定，并像猪一样在荣誉的猪圈里打滚，最后耽搁了将近四十年才发现纯真的可贵。<u>[上校]</u></li>
<li>她辛苦多年忍受折磨，好不容易赢得的孤独特权，绝不肯用来换取一个被虚假迷人的怜悯打扰的晚年。<u>[丽贝卡]</u></li>
<li>仿佛命运颠倒了事物，<u>使他变成了情人的丈夫，妻子的情人</u>。</li>
<li>还说不论在什么地方都要记住，过去都是假的，回忆没有归路，春天总是一去不返，最疯狂执着的爱情也终究是过眼云烟。</li>
<li>羊皮卷上所载一切自永远至永远不会重复，因为注定经受百年孤独的家族不会有第二次机会在大地上出现。</li>
</ol>
<h1 id="巨人的陨落-1"><a href="#巨人的陨落-1" class="headerlink" title="巨人的陨落 $1$"></a>巨人的陨落 $1$</h1><ol>
<li>[<u>俄</u>国]   就像是个安全阀，用来缓解改革的压力，让它通过无害的茶会和乡下舞会释放出去。不过这个办法没起作用。</li>
<li>[<u>比利</u>]   一想到要离家远走，他还是感到伤心，离开的不单单是一所房子，而是他过去向往的生活。</li>
<li>[<u>死讯邮差</u>]   这男孩在街上穿来穿去，简直就是个戴着邮差帽的死亡天使。</li>
<li>[<u>俄革命前</u>]   <u><strong>彼得格勒现在就想火炉上的一锅水，格雷戈里心想：锅上冒着丝蒸汽，不时泛起暴烈的气泡，表面弥散着滚烫的热流，但下面的水没什么动静，越是盯着越不开。</strong></u></li>
<li>摸着黑说话都挺有骨气，天亮以后恐怕就是另一回事了。</li>
<li>[<u>叛变</u>]  这么多年他总是嘴上说反抗权威，今天他真的这样做了。<u>他觉得自己获得了新生，是一种不同的生物，一只飞翔在空中的鸟。</u></li>
<li>如果你欠了一百美元，银行就控制住了你，可如果你欠下一百万美元，你就把银行牢牢抓在了自己手里。</li>
<li>[<u>茉黛引《圣经》</u>]：<br>你往哪里去，我也往哪里去；<br>你在哪里住宿，我也在哪里住宿；<br>你的国就是我的国，你的神就是我的神；<br>你在哪里死……<br><strong>你在哪里死，我也在哪里死，也葬在哪里。</strong></li>
</ol>
<h1 id="睡眠革命"><a href="#睡眠革命" class="headerlink" title="睡眠革命"></a>睡眠革命</h1><ol>
<li><p>光线是最重要的生物钟调节器，没有什么比早晨的阳光更加美好。</p>
</li>
<li><p>夜间，人造光抑制睡眠，将电脑置于一旁，使松果腺高效工作，在黑暗中分泌褪黑素。</p>
</li>
<li><p>深度睡眠—–$\delta$ 波（频率最低）</p>
<p>清醒———–$\beta$ 波</p>
</li>
<li><p>睡眠周期末——快速眼动睡眠阶段，结束后，我们会醒来，但一般我们不知道，接着进入下一个睡眠周期（90min）。</p>
</li>
<li><p>你必须灵活机动地适应这些，继续好好享受你的人生，而非过多地担心你的上床时间。</p>
</li>
<li><p>一旦开始担心这些问题，身体就会释放出肾上腺素和皮质醇等压力急速，反而更加清醒。</p>
</li>
<li><p>你只看到了每晚的睡眠时间，而没有看到，这是一个全天候24小时的修复过程。</p>
</li>
<li><p>用90分钟时长的睡眠周期衡量睡眠，而不是睡了多少个小时。</p>
</li>
<li><p>4个睡眠周期组成的睡眠，并不仅仅包括6个小时的夜间睡眠，而是一个由9个小时组成的修复过程。</p>
</li>
<li><p>白天：即便是非常短暂的日间小睡，也能增强大脑的记忆处理能力。</p>
</li>
</ol>
<h1 id="小狗钱钱"><a href="#小狗钱钱" class="headerlink" title="小狗钱钱"></a>小狗钱钱</h1><ol>
<li><p>如果你想富有，请把自己变成一个小孩。因为小孩子的框框最少，他们诚实，快乐，乐于学习。</p>
</li>
<li><p>生活为我们提供的众多财富——金钱便是其中之一。</p>
</li>
<li><p>当我们发现对要学的东西早已熟悉时，可能就不会继续学习下去。因为我们觉得自己已经知道了，所以就对这些信息不再感兴趣。</p>
</li>
<li><p>总会有一些人想要阻止我们实现自己的目标，阻力甚至经常来自我们的亲戚朋友，但还是有一些不让自己迷失的方法。</p>
</li>
<li><p>并非困难使我们放弃，而是因为我们放弃，才显得如此困难。</p>
</li>
<li><p><u>第一件事就是准备一本相册，贴满与我梦想有关的照片。</u></p>
</li>
<li><p>成功日记的作用：你的自信程度决定了你是否相信自己的能力，是否相信你自己。假如你根本不相信你能做到的话，那么你根本不会动手去做，那么你就什么也得不到。</p>
</li>
<li><p>为别人解决一个难题，那么你就能赚到钱。</p>
</li>
<li><p>把经历集中在你知道的，能做的和拥有的东西上。</p>
</li>
<li><p>无论在什么时候都不能把希望只寄托在一份工作上，它持续的时间不会像你设想的那么长。</p>
</li>
<li><p><strong>我生命中出现了最美好的东西，是因为我做了原本不敢做的事。</strong></p>
</li>
<li><p>72小时定律：<br>72小时内完成，否则可能永远都不会做。</p>
</li>
<li><p>$$<br>72小时定律: \left{<br>\begin{array}{<strong>lr</strong>}<br>\frac{72}{100\times通胀率} &#x3D; 钱价值缩水一半的年数 \<br>\frac{72}{100\times 年利率} &#x3D; 基金钱翻一倍的年数<br>\end{array}<br>\right.<br>$$</p>
</li>
</ol>
<h1 id="刀锋"><a href="#刀锋" class="headerlink" title="刀锋"></a>刀锋</h1><h5 id="毛姆·萨默赛特"><a href="#毛姆·萨默赛特" class="headerlink" title="毛姆·萨默赛特"></a>毛姆·萨默赛特</h5><ol>
<li>超级转折：1929年10月23日，纽约股票市场崩盘了。</li>
<li>激情是不计代价的。哲学家帕斯卡说过，感情自由理智参不透的理由。如果我的理解没错，这是指<u>当感情受激情所控制，就会<strong>发明</strong> 看似可信的理由，来证明可以爱牺牲的一切</u> ，置个人荣誉于度外，忍受羞辱也甘愿。</li>
<li>[<u>苏菲</u>]   她觉得既然再也喝不到天堂的琼浆玉露，倒不如让自己镇日与屎尿为伍。</li>
<li>[<u>艾略特之死</u>]  这位老友为人亲切和善，一生却是如此傻气，无用又微不足道，我想到这里就悲从中来。他出席过无数宴会，和许多王公贵族，爵士名流来往，如今都毫无意义，这些人早把他给忘了。</li>
<li>她的呼吸急促，直盯着拉里那仗着金黄细毛的结实的手腕，还有细致却有力的大手，我有生以来头一次剪刀她脸上露出如此饥渴的神色。<u>她的表情充满肉欲，我玩玩没料到这般美貌竟可表现得如此浪荡</u>，已然无关人性，纯属动物本能。<u>姣好的面容早已褪去，变得丑陋和骇人，让人联想起发情的母狗</u>，我不禁有些作呕。她完全无视我的存在，全神贯注地盯着拉里的大手，那只手不过随意搭在椅背上，便教她欲火中烧。忽然她浑身发抖，脸部肌肉一阵抽动，闭起眼睛就往角落靠去。</li>
<li>[<u>拉里批判基督</u>]  如果父亲让孩子来到世界上，却无法或不愿意抚养，我们只会加以谴责。我觉得万能的造物主创造万物后，如果不提供物质与精神的食粮，倒不如不要造物。</li>
<li>暌违：别离，隔离</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://guge2.github.io/2024/12/07/%E4%B9%A6%E7%B1%8D%E6%91%98%E6%8A%84/%E4%B9%A6%E7%B1%8D%E6%91%98%E6%8A%84/" data-id="cm4dlsvko0004dcjj1tlua9qr" data-title="书籍摘抄" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-mirror_calib" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/12/07/mirror_calib/" class="article-date">
  <time class="dt-published" datetime="2024-12-07T03:16:31.029Z" itemprop="datePublished">2024-12-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="标定与镜像扫描"><a href="#标定与镜像扫描" class="headerlink" title="标定与镜像扫描"></a>标定与镜像扫描</h1><p>重建的方案有两个:</p>
<ul>
<li>要操作图像: 同时翻转(y轴) 标定图像和扫描图像，并考虑畸变校正</li>
<li>不操作图像: 重建出三维点后进行镜像翻转，并在重建前校正畸变</li>
</ul>
<h2 id="1-不操作图像"><a href="#1-不操作图像" class="headerlink" title="1. 不操作图像:"></a>1. 不操作图像:</h2><ul>
<li><strong>无扫描头标定:</strong> 采集标定数据，常规的双目立体相机标定流程，获取相机内参、外参以及畸变参数；</li>
<li><strong>带扫描头重建:</strong> 采集扫描数据，首先对图像进行畸变校正，再根据标定数据进行三维重建，获得镜中世界坐标系下的物体三维点 $P_m$；</li>
</ul>
<p>记镜中物体在左相机坐标系下的三维点为 $P_m$，真实物体在左相机坐标系下的三维点为 $P_w$，通过简单的Y方向镜像 $S_Y$ 翻转后有:<br>  $$ P_w &#x3D; \begin{bmatrix}<br>  x_w \ y_w \ z_w<br>  \end{bmatrix} &#x3D; \begin{bmatrix} 1 &amp; 0 &amp; 0 \ 0 &amp; -1 &amp; 0 \ 0 &amp; 0 &amp; 1 \end{bmatrix} \begin{bmatrix}<br>  x_m \ y_m \ z_m<br>  \end{bmatrix} &#x3D; S_Y P_m$$</p>
<p>  该方法较为直观。</p>
<h2 id="2-要操作图像"><a href="#2-要操作图像" class="headerlink" title="2. 要操作图像:"></a>2. 要操作图像:</h2><ul>
<li><strong>无扫描头标定:</strong> 采集标定图像，所有图像沿 y 轴翻转，进行常规的双目立体相机标定流程，获取相机内参、外参和畸变参数；</li>
<li><strong>带扫描头重建:</strong> 采集扫描图像，所有图像沿 y 轴翻转后，再进行畸变校正，之后进行三维重建，获取世界坐标系下的物体三维点 $P_w$；</li>
</ul>
<p>该方法将一些镜像翻转的操作隐含在标定和重建过程中。</p>
<p>翻转前后的像素坐标 $p_l$, $p_r$ 的关系为:<br>$$ p’ &#x3D; \begin{bmatrix} u’ \ v’ \ 1\end{bmatrix} &#x3D; \begin{bmatrix} u \ H-v-1 \1 \end{bmatrix}  &#x3D; \begin{bmatrix} 1&amp;0&amp;0\0&amp;-1&amp;H-1\0&amp;0&amp;1 \end{bmatrix} \begin{bmatrix} u \ v \ 1 \end{bmatrix} &#x3D; S_\text{bmp} \cdot p $$</p>
<h2 id="3-操作图像-old-与不操作图像-new-标定数据的联系"><a href="#3-操作图像-old-与不操作图像-new-标定数据的联系" class="headerlink" title="3. 操作图像 (old) 与不操作图像 (new) 标定数据的联系:"></a>3. 操作图像 (old) 与不操作图像 (new) 标定数据的联系:</h2><p>下列式子中, $S_\text{bmp} &#x3D; S_\text{bmp}^{-1}$, $S_X &#x3D; S_X^{-1}$,  $S_Y &#x3D; S_Y^{-1}$, $S_Z &#x3D; S_Z^{-1}$;</p>
<ul>
<li><p><strong>内参矩阵 $A$</strong> 隐式地将相机坐标系下的三维点沿着 y 轴镜像翻转: (SY), 这样做使得内参矩阵 $A[0]$ 与 $A[4]$ 均保持正数:<br>$$ A_\text{new} &#x3D; S_\text{bmp} \cdot A_\text{old} \cdot S_Y$$<br>$$ A_\text{old} &#x3D; S_\text{bmp} \cdot A_\text{new} \cdot S_Y$$</p>
</li>
<li><p><strong>外参矩阵 $R$, $T$</strong> 隐式地将世界坐标系下的三维点沿着 z 轴镜像翻转: (S_Z), 翻转之后再旋转至相机坐标系下, 再次沿着 y 轴镜像翻转: (S_Y), 这个 y 轴的镜像翻转将与 $A$ 中的翻转抵消:<br>$$ R_\text{new} &#x3D; S_Y \cdot R_\text{old} \cdot S_Z $$<br>$$ R_\text{old} &#x3D; S_Y \cdot R_\text{new} \cdot S_Z $$<br>$$ t_\text{new} &#x3D; S_Y \cdot t_\text{old} $$<br>$$ t_\text{old} &#x3D; S_Y \cdot t_\text{new} $$</p>
</li>
<li><p><strong>投影矩阵 $T$</strong>:<br>$$ T_\text{new} &#x3D; S_\text{bmp} \cdot A_\text{old} \cdot \begin{bmatrix}R_\text{old} \cdot S_Z &amp; T_\text{old}\end{bmatrix} $$<br>$$ T_\text{old} &#x3D; S_\text{bmp} \cdot A_\text{new} \cdot \begin{bmatrix}R_\text{new} \cdot S_Z &amp; T_\text{new}\end{bmatrix} $$</p>
</li>
<li><p><strong>立体外参</strong>:<br>$$ p_l &#x3D; R_l \cdot P_w + t_l $$<br>$$ p_r &#x3D; R_r \cdot P_w + t_r $$<br>所以:<br>$$ p_r &#x3D; R_r \cdot R_l^{-1} \cdot p_l + T_r - R_r \cdot R_l^{-1} \cdot T_l $$<br>即:<br>$$ $\mathcal{R} &#x3D; R_r \cdot R_l^{-1} $$<br>$$ $\mathcal{t} &#x3D; t_r - $\mathcal{R} \cdot t_l $$<br>带入两种标定的结果并化简得到立体外参:<br>$$\mathcal{R}_\text{old} &#x3D; S_Y \cdot $\mathcal{R}_\text{new} \cdot S_Y $$<br>$$ \mathcal{t}_\text{old} &#x3D; S_Y \cdot \mathcal{t}_\text{new} $$<br>则立体投影矩阵:<br>$$ \mathcal{T}_\text{old} &#x3D; S_\text{bmp} \cdot \mathcal{T}_\text{new} \cdot \begin{bmatrix}S_Y &amp; 0\ 0 &amp; 1\end{bmatrix} $$</p>
</li>
</ul>
<h2 id="4-重建"><a href="#4-重建" class="headerlink" title="4. 重建"></a>4. 重建</h2><p>重建时，射线求交法与三角测量法等价。对于 <code>new</code> 方法，有对应点 $p_l(u_l, v_l)$ 和 $p_r(u_r, v_r)$，计算左相机坐标系下的三维物体坐标 $P_w$:</p>
<p>$$ \tilde{p_l} &#x3D; A_{l,\text{new}} \cdot \tilde{P_w} $$<br>$$ \tilde{p_r} &#x3D; A_{r,\text{new}} \cdot (R_\text{new} \cdot \tilde{P_w} + t_\text{new})$$</p>
<p>对于 <code>old</code> 方法，有对应点 $p_l’(u_l, H-v_l-1)$ 和 $p_r’(u_r, H-v_r-1)$，计算左相机坐标系下的三维物体坐标 $P_w’$:<br>$$ \tilde{p_l’} &#x3D; A_{l,\text{old}} \cdot \tilde{P_w’} $$<br>$$ \tilde{p_r’} &#x3D; A_{r,\text{old}} \cdot (R_\text{old} \cdot \tilde{P_w’} + t_\text{old}) $$<br>公式变形:</p>
<p>$$ \tilde{p_l} &#x3D; S_\text{bmp} \cdot \tilde{p_l’} &#x3D; S_\text{bmp} \cdot A_{l,\text{old}} \cdot \tilde{P_w’} &#x3D; A_\text{new} \cdot S_Y \cdot \tilde{P_w’} $$<br>$$ \tilde{p_r} &#x3D; S_\text{bmp} \cdot \tilde{p_r’} &#x3D; S_\text{bmp} \cdot A_{r,\text{old}} \cdot (\mathcal{R}_\text{old} \cdot \tilde{P_w’} + \mathcal{t}<em>\text{old}) &#x3D; A</em>{r,\text{new}} \cdot (\mathcal{R}_\text{new} \cdot S_Y \cdot \tilde{P_w’} + \mathcal{t}_\text{new}) $$</p>
<p>联立上述方程，得到 <code>new</code> 方法重建出的三维点 $P_w$ 与 <code>old</code> 方法重建出的三维点 $P_w’$ 的关系:<br>$$ P_w &#x3D; S_Y \cdot P_w’ $$<br>也就是关于 y 轴镜像翻转的关系。</p>
<h2 id="6-考虑畸变模型"><a href="#6-考虑畸变模型" class="headerlink" title="6. 考虑畸变模型"></a>6. 考虑畸变模型</h2><h3 id="畸变模型"><a href="#畸变模型" class="headerlink" title="畸变模型"></a>畸变模型</h3><p>假设畸变参数为 $k_1, k_2, k_3$（径向畸变）和 $p_1, p_2$（切向畸变），像素坐标 $(u, v)$ 在归一化平面上的坐标为 $(x, y)$:</p>
<p>畸变后得到的坐标 $(x_\text{distorted }, y_\text{distorted })$ 如下：<br>$$\left{\begin{array}{c}x_\text{distorted }&#x3D;x\left(1+k_1r^2+k_2r^4+k_3r^6\right)+2p_1xy+p_2\left(r^2+2x^2\right)\y_\text{distorted }&#x3D;y\left(1+k_1r^2+k_2r^4+k_3r^6\right)+2p_2xy+p_1\left(r^2+2y^2\right)\end{array}\right.$$</p>
<h4 id="1-不操作图像方法（Old）"><a href="#1-不操作图像方法（Old）" class="headerlink" title="1. 不操作图像方法（Old）"></a>1. 不操作图像方法（Old）</h4><p>原始图像的畸变校正参数为 $k_1^\text{old}, k_2^\text{old}, k_3^\text{old}, p_1^\text{old}, p_2^\text{old}$。在该方法中，直接对图像应用这些畸变参数进行校正，并使用校正后的图像进行三维重建。<br>$$ p_{old} &#x3D; A_{old}^{-1} \cdot u_{old}$$</p>
<h4 id="2-操作图像方法（New）"><a href="#2-操作图像方法（New）" class="headerlink" title="2. 操作图像方法（New）"></a>2. 操作图像方法（New）</h4><p>采集的图像在y轴上进行了翻转，对于翻转后的图像，畸变参数的计算需进行调整。像素坐标 $u_{old}(u, v, 1)$ 与归一化平面上的坐标 $p_{new}(x, y, 1)$ 的关系为：<br>$$ p_{new} &#x3D; A_{new}^{-1} \cdot u_{new} &#x3D; S_Y \cdot A_{old}^{-1}\cdot S_\text{bmp} \cdot u_{new} &#x3D; S_Y \cdot p_{old} $$<br>也就是说, 对于待重建物体的同一个点, 其在<code>old</code>和<code>new</code>方法中对应像素点在归一化平面上的坐标满足, 存在左右手对称的坐标轴关系:<br>$$ x_{new} &#x3D; x_{old} $$<br>$$ x_{newundist} &#x3D; x_{oldundist} $$<br>$$ y_{new} &#x3D; -y_{old} $$<br>$$ y_{newundist} &#x3D; -y_{oldundist} $$</p>
<p>因此，对于翻转后的图像，其畸变模型变为：</p>
<ul>
<li><p><strong>径向畸变</strong>:<br>$$ r’^2 &#x3D; x_{new}^2 + y_{new}^2 &#x3D; x_{old}^2 + y_{old}^2 &#x3D; r^2 $$<br>由于 $r^2$ 不变，因此径向畸变参数不变.</p>
</li>
<li><p><strong>切向畸变</strong>:<br>对于切向畸变, 可得 $p_1^\text{new} &#x3D; -p_1^\text{old}$, $p_2^\text{new} &#x3D; p_2^\text{old}$, 这与实验所得畸变数据的规律一致.</p>
</li>
</ul>
<h3 id="畸变模型联系"><a href="#畸变模型联系" class="headerlink" title="畸变模型联系:"></a>畸变模型联系:</h3><p>$$ [k_1^\text{new}, k_2^\text{new}, k_3^\text{new}, p_1^\text{new}, p_2^\text{new}] &#x3D; [k_1^\text{old}, k_2^\text{old}, k_3^\text{old}, -p_1^\text{old}, p_2^\text{old}] $$</p>
<h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p>通过理解上述关联，去畸变后的三维点一致, 重建结果互为镜像, 互相无形变。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://guge2.github.io/2024/12/07/mirror_calib/" data-id="cm4dlsvki0002dcjj7trxfbbm" data-title="" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-calib_math" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/12/07/calib_math/" class="article-date">
  <time class="dt-published" datetime="2024-12-07T03:16:11.036Z" itemprop="datePublished">2024-12-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="单目相机标定优化问题推导"><a href="#单目相机标定优化问题推导" class="headerlink" title="单目相机标定优化问题推导"></a>单目相机标定优化问题推导</h1><h2 id="问题定义"><a href="#问题定义" class="headerlink" title="问题定义"></a>问题定义</h2><p>我们的目标是最小化重投影误差:</p>
<p>$$<br>\min \sum_{i&#x3D;1}^n |(u_i, v_i, 1) - AR(X_i, Y_i, Z_i) - At|^2<br>$$</p>
<p>其中:</p>
<ul>
<li>$(u_i, v_i)$ 是图像平面上的2D点坐标</li>
<li>$(X_i, Y_i, Z_i)$ 是世界坐标系中的3D点坐标</li>
<li>$A$ 是相机内参矩阵</li>
<li>$R$ 是旋转矩阵</li>
<li>$t$ 是平移向量</li>
</ul>
<h2 id="1-对相机内参的偏导"><a href="#1-对相机内参的偏导" class="headerlink" title="1. 对相机内参的偏导"></a>1. 对相机内参的偏导</h2><p>假设相机内参矩阵 $A$ 的形式为:</p>
<p>$$<br>A &#x3D; \begin{bmatrix}<br>f_x &amp; s &amp; c_x \<br>0 &amp; f_y &amp; c_y \<br>0 &amp; 0 &amp; 1<br>\end{bmatrix}<br>$$</p>
<p>其中 $f_x, f_y$ 是焦距, $c_x, c_y$ 是主点坐标, $s$ 是倾斜因子。</p>
<p>设 $P &#x3D; R(X, Y, Z) + t &#x3D; (P_x, P_y, P_z)^T$, 则重投影点坐标为:</p>
<p>$$<br>\begin{bmatrix}<br>u \<br>v \<br>1<br>\end{bmatrix} &#x3D; A \cdot P &#x3D; \begin{bmatrix}<br>f_x P_x + s P_y + c_x P_z \<br>f_y P_y + c_y P_z \<br>P_z<br>\end{bmatrix}<br>$$</p>
<p>对各参数求偏导:</p>
<p>$$<br>\frac{\partial u}{\partial f_x} &#x3D; P_x, \quad \frac{\partial v}{\partial f_x} &#x3D; 0<br>$$</p>
<p>$$<br>\frac{\partial u}{\partial f_y} &#x3D; 0, \quad \frac{\partial v}{\partial f_y} &#x3D; P_y<br>$$</p>
<p>$$<br>\frac{\partial u}{\partial c_x} &#x3D; P_z, \quad \frac{\partial v}{\partial c_x} &#x3D; 0<br>$$</p>
<p>$$<br>\frac{\partial u}{\partial c_y} &#x3D; 0, \quad \frac{\partial v}{\partial c_y} &#x3D; P_z<br>$$</p>
<p>$$<br>\frac{\partial u}{\partial s} &#x3D; P_y, \quad \frac{\partial v}{\partial s} &#x3D; 0<br>$$</p>
<h2 id="2-对旋转参数的偏导"><a href="#2-对旋转参数的偏导" class="headerlink" title="2. 对旋转参数的偏导"></a>2. 对旋转参数的偏导</h2><p>我们使用罗德里格斯公式表示旋转矩阵 $R$:</p>
<p>$$<br>R &#x3D; I + \sin\theta [\omega]_\times + (1-\cos\theta) [\omega]_\times^2<br>$$</p>
<p>其中 $\omega &#x3D; (\omega_x, \omega_y, \omega_z)^T$ 是旋转向量, $\theta &#x3D; |\omega|$ 是旋转角度, $[\omega]_\times$ 是 $\omega$ 的反对称矩阵。</p>
<p>对旋转向量 $\omega$ 求偏导:</p>
<p>$$<br>\frac{\partial R}{\partial \omega_i} &#x3D; \frac{\partial R}{\partial \theta} \frac{\partial \theta}{\partial \omega_i} + \sin\theta \frac{\partial [\omega]_\times}{\partial \omega_i} + (1-\cos\theta) \frac{\partial [\omega]_\times^2}{\partial \omega_i}<br>$$</p>
<p>其中:</p>
<p>$$<br>\frac{\partial R}{\partial \theta} &#x3D; \cos\theta [\omega]_\times + \sin\theta [\omega]_\times^2<br>$$</p>
<p>$$<br>\frac{\partial \theta}{\partial \omega_i} &#x3D; \frac{\omega_i}{\theta}<br>$$</p>
<p>$$<br>\frac{\partial [\omega]_\times}{\partial \omega_i} \text{ 和 } \frac{\partial [\omega]_\times^2}{\partial \omega_i} \text{ 可以直接计算得到}<br>$$</p>
<p>然后, 我们可以得到重投影坐标对旋转向量的偏导:</p>
<p>$$<br>\frac{\partial u}{\partial \omega_i} &#x3D; f_x \frac{\partial (RP)_x}{\partial \omega_i} + s \frac{\partial (RP)_y}{\partial \omega_i} + c_x \frac{\partial (RP)_z}{\partial \omega_i}<br>$$</p>
<p>$$<br>\frac{\partial v}{\partial \omega_i} &#x3D; f_y \frac{\partial (RP)_y}{\partial \omega_i} + c_y \frac{\partial (RP)_z}{\partial \omega_i}<br>$$</p>
<p>其中从旋转向量到旋转矩阵的转换，以及旋转矩阵对旋转向量的导数计算。下面是对应的公式推导：</p>
<ol>
<li><p>旋转向量到旋转矩阵的转换（Rodrigues’ rotation formula）：</p>
<p>设旋转向量 $\mathbf{in} &#x3D; \theta \mathbf{\omega}$，其中 $\theta$ 是旋转角度，$\mathbf{\omega}$ 是单位旋转轴。</p>
<p>旋转矩阵 $R$ 可以表示为：</p>
<p>$R &#x3D; I + \sin\theta[\mathbf{\omega}]_\times + (1-\cos\theta)[\mathbf{\omega}]_\times^2$</p>
<p>其中 $[\mathbf{\omega}]_\times$ 是 $\mathbf{\omega}$ 的斜对称矩阵。</p>
</li>
<li><p>中间变量定义：</p>
<p>$\mathbf{m3} &#x3D; \mathbf{in}$<br>$\mathbf{m2} &#x3D; [\mathbf{\omega}, \theta]^T$<br>$\mathbf{m1} &#x3D; [\alpha, \beta, \gamma, \text{vec}([\mathbf{\omega}]_\times), \text{vec}(\mathbf{\omega}\mathbf{\omega}^T)]^T$</p>
<p>其中 $\alpha &#x3D; \cos\theta$, $\beta &#x3D; \sin\theta$, $\gamma &#x3D; 1-\cos\theta$</p>
</li>
<li><p>导数链式法则：</p>
<p>$\frac{\partial R}{\partial \mathbf{in}} &#x3D; \frac{\partial R}{\partial \mathbf{m1}} \frac{\partial \mathbf{m1}}{\partial \mathbf{m2}} \frac{\partial \mathbf{m2}}{\partial \mathbf{m3}} \frac{\partial \mathbf{m3}}{\partial \mathbf{in}}$</p>
</li>
<li><p>各部分导数：</p>
<p>a. $\frac{\partial \mathbf{m3}}{\partial \mathbf{in}} &#x3D; \begin{bmatrix} I_{3\times3} \ \frac{\mathbf{in}^T}{\theta} \end{bmatrix}$</p>
<p>b. $\frac{\partial \mathbf{m2}}{\partial \mathbf{m3}} &#x3D; \begin{bmatrix} \frac{1}{\theta}I_{3\times3} &amp; -\frac{\mathbf{in}}{\theta^2} \ 0_{1\times3} &amp; 1 \end{bmatrix}$</p>
<p>c. $\frac{\partial \mathbf{m1}}{\partial \mathbf{m2}}$ 是一个 21x4 的矩阵，其中：</p>
<ul>
<li>$\frac{\partial \alpha}{\partial \theta} &#x3D; -\sin\theta$</li>
<li>$\frac{\partial \beta}{\partial \theta} &#x3D; \cos\theta$</li>
<li>$\frac{\partial \gamma}{\partial \theta} &#x3D; \sin\theta$</li>
<li>$\frac{\partial [\mathbf{\omega}]_\times}{\partial \mathbf{\omega}}$ 对应代码中的 4:12 行</li>
<li>$\frac{\partial (\mathbf{\omega}\mathbf{\omega}^T)}{\partial \mathbf{\omega}}$ 对应代码中的 13:21 行</li>
</ul>
<p>d. $\frac{\partial R}{\partial \mathbf{m1}}$ 是一个 9x21 的矩阵，可以分解为：</p>
<ul>
<li>$\frac{\partial R}{\partial \alpha} &#x3D; I_{3\times3}$</li>
<li>$\frac{\partial R}{\partial \beta} &#x3D; [\mathbf{\omega}]_\times$</li>
<li>$\frac{\partial R}{\partial \gamma} &#x3D; \mathbf{\omega}\mathbf{\omega}^T$</li>
<li>$\frac{\partial R}{\partial [\mathbf{\omega}]<em>\times} &#x3D; \beta I</em>{9\times9}$</li>
<li>$\frac{\partial R}{\partial (\mathbf{\omega}\mathbf{\omega}^T)} &#x3D; \gamma I_{9\times9}$</li>
</ul>
</li>
<li><p>最终结果：</p>
<p>$\frac{\partial R}{\partial \mathbf{in}} &#x3D; \frac{\partial R}{\partial \mathbf{m1}} \frac{\partial \mathbf{m1}}{\partial \mathbf{m2}} \frac{\partial \mathbf{m2}}{\partial \mathbf{m3}} \frac{\partial \mathbf{m3}}{\partial \mathbf{in}}$</p>
<p>这就是代码中最后一行 <code>dRdin = dRdm1 * dm1dm2 * dm2dm3 * dm3din;</code> 所计算的结果。</p>
</li>
</ol>
<p>这个推导过程展示了如何通过链式法则计算复杂函数的导数，将大问题分解为多个小步骤，每个步骤都相对简单和直观。</p>
<h2 id="3-对平移向量的偏导"><a href="#3-对平移向量的偏导" class="headerlink" title="3. 对平移向量的偏导"></a>3. 对平移向量的偏导</h2><p>平移向量 $t &#x3D; (t_x, t_y, t_z)^T$ 的偏导比较直接:</p>
<p>$$<br>\frac{\partial u}{\partial t_x} &#x3D; f_x, \quad \frac{\partial v}{\partial t_x} &#x3D; 0<br>$$</p>
<p>$$<br>\frac{\partial u}{\partial t_y} &#x3D; s, \quad \frac{\partial v}{\partial t_y} &#x3D; f_y<br>$$</p>
<p>$$<br>\frac{\partial u}{\partial t_z} &#x3D; c_x, \quad \frac{\partial v}{\partial t_z} &#x3D; c_y<br>$$</p>
<h2 id="4-对3D点坐标的偏导"><a href="#4-对3D点坐标的偏导" class="headerlink" title="4. 对3D点坐标的偏导"></a>4. 对3D点坐标的偏导</h2><p>对于3D点坐标 $(X, Y, Z)$, 我们有:</p>
<p>$$<br>\frac{\partial u}{\partial X} &#x3D; f_x r_{11} + s r_{21} + c_x r_{31}<br>$$</p>
<p>$$<br>\frac{\partial u}{\partial Y} &#x3D; f_x r_{12} + s r_{22} + c_x r_{32}<br>$$</p>
<p>$$<br>\frac{\partial u}{\partial Z} &#x3D; f_x r_{13} + s r_{23} + c_x r_{33}<br>$$</p>
<p>$$<br>\frac{\partial v}{\partial X} &#x3D; f_y r_{21} + c_y r_{31}<br>$$</p>
<p>$$<br>\frac{\partial v}{\partial Y} &#x3D; f_y r_{22} + c_y r_{32}<br>$$</p>
<p>$$<br>\frac{\partial v}{\partial Z} &#x3D; f_y r_{23} + c_y r_{33}<br>$$</p>
<p>其中 $r_{ij}$ 是旋转矩阵 $R$ 的第 $i$ 行第 $j$ 列元素。</p>
<p>这些偏导数可以用于构建雅可比矩阵,进而在Levenberg-Marquardt优化算法中使用。每次迭代中,我们都会更新相机参数和3D点坐标,以最小化重投影误差。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://guge2.github.io/2024/12/07/calib_math/" data-id="cm4dlsvka0000dcjjb3bj8uaz" data-title="" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-hexoBlog" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/11/17/hexoBlog/" class="article-date">
  <time class="dt-published" datetime="2024-11-17T04:19:01.000Z" itemprop="datePublished">2024-11-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/11/17/hexoBlog/">Hexo 结合 Github部署个人博客</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="1-首先安装必要的工具："><a href="#1-首先安装必要的工具：" class="headerlink" title="1. 首先安装必要的工具："></a>1. 首先安装必要的工具：</h2><ul>
<li><p>安装 Node.js：</p>
<ol>
<li>访问 <a target="_blank" rel="noopener" href="https://nodejs.org/">https://nodejs.org/</a></li>
<li>下载并安装长期支持版(LTS)</li>
<li>安装完成后，打开命令提示符(CMD)，输入以下命令验证安装：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br><span class="line">npm -v</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装 Git：</p>
<ol>
<li>访问 <a target="_blank" rel="noopener" href="https://git-scm.com/download/win">https://git-scm.com/download/win</a></li>
<li>下载并安装最新版本的 Git</li>
<li>验证安装：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git --version</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="2-安装-Hexo："><a href="#2-安装-Hexo：" class="headerlink" title="2. 安装 Hexo："></a>2. 安装 Hexo：</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br><span class="line">hexo -v  <span class="comment"># 验证安装</span></span><br></pre></td></tr></table></figure>

<h2 id="3-创建博客项目："><a href="#3-创建博客项目：" class="headerlink" title="3. 创建博客项目："></a>3. 创建博客项目：</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建一个文件夹用于存放博客文件</span></span><br><span class="line"><span class="built_in">mkdir</span> blog</span><br><span class="line"><span class="built_in">cd</span> blog</span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化博客</span></span><br><span class="line">hexo init</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>

<h2 id="4-本地测试博客："><a href="#4-本地测试博客：" class="headerlink" title="4. 本地测试博客："></a>4. 本地测试博客：</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean   <span class="comment"># 清除缓存</span></span><br><span class="line">hexo generate  <span class="comment"># 生成静态文件</span></span><br><span class="line">hexo server   <span class="comment"># 启动本地服务器</span></span><br></pre></td></tr></table></figure>

<p>现在打开浏览器访问 <a target="_blank" rel="noopener" href="http://localhost:4000/">http://localhost:4000</a> 就能看到你的博客了</p>
<h2 id="5-配置-GitHub："><a href="#5-配置-GitHub：" class="headerlink" title="5. 配置 GitHub："></a>5. 配置 GitHub：</h2><ul>
<li>创建一个新的 GitHub 仓库<ol>
<li>仓库名必须为：<code>你的GitHub用户名.github.io</code></li>
<li>确保仓库是公开的</li>
</ol>
</li>
<li>生成 SSH 密钥（如果没有的话）：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;你的邮箱地址&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>将生成的公钥（在 C:\Users\你的用户名.ssh\id_rsa.pub）添加到 GitHub 账号设置中的 SSH Keys</li>
</ul>
<h2 id="6-配置部署信息："><a href="#6-配置部署信息：" class="headerlink" title="6. 配置部署信息："></a>6. 配置部署信息：</h2><ul>
<li>安装部署插件：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>

<ul>
<li>编辑博客根目录下的 <code>_config.yml</code> 文件，在对应位置添加：</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Site</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">cattac的博客</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">&#x27;记录写读书笔记与技术&#x27;</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="attr">keywords:</span> <span class="string">书籍,</span> <span class="string">算法,</span> <span class="string">Python,</span> <span class="string">C++</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">cattac</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-CN</span></span><br><span class="line"><span class="attr">timezone:</span> <span class="string">&#x27;Asia/Shanghai&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># URL 配置部分（这个很重要）</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">https://你的用户名.github.io</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">/</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">:year/:month/:day/:title/</span></span><br><span class="line"><span class="attr">permalink_defaults:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">git@github.com:你的用户名/你的用户名.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">main</span></span><br></pre></td></tr></table></figure>

<h2 id="7-部署博客："><a href="#7-部署博客：" class="headerlink" title="7. 部署博客："></a>7. 部署博客：</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure>

<h2 id="8-基本使用说明："><a href="#8-基本使用说明：" class="headerlink" title="8. 基本使用说明："></a>8. 基本使用说明：</h2><ul>
<li>创建新文章：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new <span class="string">&quot;文章标题&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>文章位置：<code>source/_posts/文章标题.md</code></li>
<li>每次更新博客流程：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure>

<p>部署完成后，等待几分钟，就可以通过 <code>https://你的用户名.github.io</code> 访问你的博客了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://guge2.github.io/2024/11/17/hexoBlog/" data-id="cm4dlsvkf0001dcjjfu7o0031" data-title="Hexo 结合 Github部署个人博客" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/12/">十二月 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/11/">十一月 2024</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/12/07/python%E9%A1%B9%E7%9B%AE%E5%B7%A5%E7%A8%8B%E5%8C%96/">Python 项目工程化开发</a>
          </li>
        
          <li>
            <a href="/2024/12/07/%E4%B9%A6%E7%B1%8D%E6%91%98%E6%8A%84/%E4%B9%A6%E7%B1%8D%E6%91%98%E6%8A%84/">书籍摘抄</a>
          </li>
        
          <li>
            <a href="/2024/12/07/mirror_calib/">(no title)</a>
          </li>
        
          <li>
            <a href="/2024/12/07/calib_math/">(no title)</a>
          </li>
        
          <li>
            <a href="/2024/11/17/hexoBlog/">Hexo 结合 Github部署个人博客</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 cattac<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>